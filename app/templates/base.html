<!--
=========================================================
* Argon Dashboard - Marco Pharma Edition
=========================================================
* Système de Gestion Pharmaceutique
* Basé sur Argon Dashboard de Creative Tim
=========================================================
-->
<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>
    {% block title %}MARCO PHARMA{% endblock %} | Gestion Pharmaceutique
  </title>

  <!-- Favicon - Multiple formats pour compatibilité -->
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='assets/img/brand/favicon.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='assets/img/brand/favicon.png') }}">
  <link rel="shortcut icon" href="{{ url_for('static', filename='assets/img/brand/favicon.png') }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='assets/img/brand/favicon.png') }}">
  
  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
  
  <!-- Icons -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/nucleo/css/nucleo.css') }}" type="text/css">
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/@fortawesome/fontawesome-free/css/all.min.css') }}" type="text/css">
  
  <!-- Argon CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/argon.min.css') }}?v=1.2.0" type="text/css">
  
  <!-- Custom Layout CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom-argon.css') }}" type="text/css">

  <!-- Specific CSS goes HERE -->
  {% block stylesheets %}{% endblock stylesheets %}

</head>

<body class="">

  {% if current_user.is_authenticated %}

  {% include "includes/sidenav.html" %}

  <div class="main-content" id="panel">

    {% include "includes/navigation.html" %}
    
    <div class="content-wrapper">
      {% block content %}{% endblock content %}
                </div>
                
    {% include "includes/footer.html" %}

                </div>
                
  {% else %}

  {% block auth_content %}{% endblock auth_content %}

  {% endif %}

  {% include "includes/scripts.html" %}
  {% include "includes/product_quick_view_modal.html" %}
  {% include "includes/quick_task_modal.html" %}
  {% include "includes/customer_modals.html" %}
  {% include "includes/all_modals.html" %}

  <!-- Flash Messages -->
  <script>
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for forme, message in messages %}
          // Afficher les messages Flash via notifications Argon
          console.log('{{ forme }}', '{{ message }}');
                        {% endfor %}
                    {% endif %}
                {% endwith %}
  </script>

  <!-- Dark Mode Toggle -->
  <script>
    // Gestion du mode sombre
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const body = document.body;
    
    // Charger le thème sauvegardé
    const savedTheme = localStorage.getItem('theme') || 'light';
    if (savedTheme === 'dark') {
      body.classList.add('dark-mode');
      themeIcon.classList.remove('fa-moon');
      themeIcon.classList.add('fa-sun');
    }
    
    // Toggle du thème
    if (themeToggle) {
      themeToggle.addEventListener('click', function(e) {
        e.preventDefault();
        
        body.classList.toggle('dark-mode');
        
        if (body.classList.contains('dark-mode')) {
          // Passage en mode sombre
          themeIcon.classList.remove('fa-moon');
          themeIcon.classList.add('fa-sun');
          localStorage.setItem('theme', 'dark');
        } else {
          // Passage en mode clair
          themeIcon.classList.remove('fa-sun');
          themeIcon.classList.add('fa-moon');
          localStorage.setItem('theme', 'light');
        }
      });
    }
  </script>

  <!-- Specific JS goes HERE --> 
  {% block javascripts %}{% endblock javascripts %}

</body>

</html>
